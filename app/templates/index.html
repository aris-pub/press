{% extends "base.html" %}
{% from "components/button.html" import button %}
{% from "components/preview_card.html" import preview_card %}
{% from "components/subject_card.html" import subject_card %}

{% block title %}Home - Press{% endblock %}

{% block content %}
<div class="hero">
  <div class="hero-title">
    <img src="/static/images/press-logo-64.svg" alt="Preview Press" width="40" height="40">
    <h1>Preview Press</h1>
  </div>
  <p>Open access to research preprints in web-native formats</p>
  
  <div class="search-box">
    <form class="search-form">
      <input type="text" class="search-input" placeholder="Search papers, authors, or subjects...">
      {{ button("Search", type="submit", class="search-btn-override") }}
    </form>
    <div class="search-help">
      <a href="#" style="color: #ef4444;">Advanced search tips</a> | Search includes titles, authors, abstracts, and full text
    </div>
  </div>
</div>

<div class="subjects" id="browse">
  <h2>Browse by Subject</h2>
  <div class="subject-grid">
    {% for subject in subjects %}
    {{ subject_card(subject.name, subject.preview_count) }}
    {% endfor %}
  </div>
</div>

<div class="recent" id="recent">
  <h2>Recent Submissions</h2>
  
  <div class="previews-grid">
    {% for preview_row in previews %}
    {% set preview = preview_row[0] %}
    {% set subject_name = preview_row[1] %}
    {{ preview_card(
                    preview.title,
                    preview.authors,
                    preview.abstract,
                    preview.keywords,
                    subject_name,
                    "recently",
                    "v" + preview.version|string,
                    preview.preview_id
       ) }}
    {% endfor %}
  </div>
</div>
{% endblock %}
