{# 
Navbar Component
#}
{% from "components/nav_link.html" import nav_link %}
{% from "components/button.html" import link_button %}
{% from "components/dropdown.html" import dropdown %}

<header class="navbar">

  <div class="logo">
    <a href="/">
      <img src="/static/images/press-logo-64.svg" alt="Preview Press" width="24" height="24">
      Preview Press
    </a>
  </div>
  
  <nav>
    {{ nav_link("Browse", "/#browse") }}
    {{ nav_link("Recent", "/#recent") }}
    {{ nav_link("About", "/about") }}
  </nav>
  
  <div class="auth-buttons">
    {% if current_user %}
    {{ link_button("New Preview", href="/upload", variant="primary") }}
    <div class="dropdown user-menu">
      <button class="user-menu-trigger" aria-haspopup="true" aria-expanded="false">
        <img src="/static/images/user-icon.svg" alt="User menu" class="user-icon">
        <span class="user-menu-label">{{ current_user.display_name }}</span>
      </button>
      
      <div class="dropdown-menu" role="menu">
        <a href="/dashboard" class="dropdown-item" role="menuitem">Dashboard</a>
        <form class="dropdown-form" action="/logout" method="post">
          <button type="submit" class="dropdown-item dropdown-action" role="menuitem">Logout</button>
        </form>
      </div>
    </div>
    {% else %}
    {{ link_button("New Preview", href="/register", variant="primary") }}
    {{ link_button("Login", href="/login", variant="secondary") }}
    {% endif %}
  </div>

</header>
